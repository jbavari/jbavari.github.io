
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Josh Bavari's Ramblings</title>
  <meta name="author" content="Josh Bavari">

  
  <meta name="description" content="I had a unique little situation pop up that needed a little more flexibility when it came to storing data in the db. We use Postgres at RaiseMore &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://jbavari.github.io/blog/page/6">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Josh Bavari's Ramblings" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Josh Bavari's Ramblings</a></h1>
  
    <h2>tech babbles on Ruby, Javascript, Rails, Phonegap/Cordova, Grunt, and more</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:jbavari.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
  <li><a href="/speaking">Speaking</a></li>
  <li><a href="/knowledge">Knowledge</a></li>
  <li><a href="/about/resume">Resume</a></li>
  <li><a href="/about/cv">C.V.</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/04/26/in-depth-dive-with-postgres-hstore-and-rails-4/">In Depth Dive With Postgres Hstore and Rails 4</a></h1>
    
    
      <p class="meta">
        <span class="reading-time">less than a 1 minute read</span>
        








  


<time datetime="2014-04-26T12:08:00-06:00" pubdate data-updated="true">Apr 26<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I had a unique little situation pop up that needed a little more flexibility when it came to storing data in the db. We use Postgres at RaiseMore because we respect ourselves, so naturally, I wanted to take a swing using some Hstore options for our ever changing data schema.</p>

<p>My intention is not to cover the basics of getting started with Rails 4 and <a href="http://www.postgresql.org/docs/9.3/static/hstore.html">Postgres HStore</a>, so <a href="http://tastehoneyco.com/blog/postgresql-array-and-hstore-column-reference/?utm_source=rubyweekly&amp;utm_medium=email/">read at Honey Co</a> or <a href="http://inopinatus.org/2013/07/12/using-arrays-of-hstore-with-rails-4/">here at inopinatus</a> to get started.</p>

<h2>What I needed</h2>

<p>Simple, to store a few bits of data about a communication &ndash; primarily the subject, message, date/time, and what networks it was sent out on. It may or may not have some of these fields, and the networks may or may not change in the future. This sounds perfect for HStore.</p>

<p>First I started with a simple schema:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>CREATE TABLE comm_logs (
</span><span class='line'>  id serial NOT NULL,
</span><span class='line'>  user_id integer,
</span><span class='line'>  history hstore
</span><span class='line'>)</span></code></pre></td></tr></table></div></figure>


<p>At first, I just wanted to store when a message was sent and on what networks. I figured I&rsquo;d just have an AR model with one hstore column and everything would fit into that. It looked like this:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class CommunicationLogging &lt; ActiveRecord::Base
</span><span class='line'>  def self.log(user_id, network, message, subject = nil)
</span><span class='line'>      comm = CommunicationLogging.where('user_id = ?', user_id).first
</span><span class='line'>      if comm.nil?
</span><span class='line'>          comm = CommunicationLogging.new
</span><span class='line'>          comm.user_id = user_id
</span><span class='line'>          # Storing network as an array incase they decide to send to another network after this.
</span><span class='line'>          comm.history = { 'message' =&gt; message, 'subject' =&gt; subject, 'network' =&gt; [network], 'time' =&gt; DateTime.now }}
</span><span class='line'>      else 
</span><span class='line'>          # Add history to array stored in network
</span><span class='line'>          comm.history['network'].push(network)
</span><span class='line'>      end
</span><span class='line'>      comm.history_will_change!
</span><span class='line'>      comm.save!
</span><span class='line'>  end
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<p>Pretty easy right? I ran into some difficulties REAL fast. The first was from JSON serialization. When I did this:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># In Rails Console
</span><span class='line'>CommunicationLogging.find(4).history['network']
</span><span class='line'>=&gt; "[\"facebook\", \"twitter\"]" </span></code></pre></td></tr></table></div></figure>


<p>It gave me a nice FAT serialized version of a Hash array. What good does a string do me? I want my object! BLEH!</p>

<p>We still have to get this thing working, so lets proceed anyway and just do some manual converions with PostgreSQL&rsquo;s awesome <code>to_json</code> functionality.</p>

<p>Our result:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>"{"c": "networks", "networks": "[\"facebook\", \"twitter\"]"}"</span></code></pre></td></tr></table></div></figure>


<p>Cool, so its gonna be nasty still. Ok, how about just using Rails to_json method:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>"{\"id\":11,\"event_user_id\":null,\"history\":null,\"networks\":{\"c\":\"networks\",\"networks\":\"[\\\"facebook\\\", \\\"twitter\\\"]\"}}"</span></code></pre></td></tr></table></div></figure>


<p>Thanks, but no thanks. I&rsquo;m pretty set on having an array of values instead of some manual labor on converting those values.</p>

<p>I was learning real fast that storing arrays in hstore was going to be a challenge. The next stab I wanted to take was to simplify the storage and retrieval as well as using natural arrays.</p>

<p>NOTE: I changed the way I attacked the problem here partly because I was doing it wrong. Hopefully you can learn from my mistakes? :&ndash;)</p>

<p>This was my next stab, altering the table structure just a bit:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>CREATE TABLE communication_logs (
</span><span class='line'>  id serial NOT NULL,
</span><span class='line'>  user_id integer,
</span><span class='line'>  history hstore[]
</span><span class='line'>  networks hstore
</span><span class='line'>)</span></code></pre></td></tr></table></div></figure>


<p>What I did here was harness the awesome power of PostgreSQL&rsquo;s arrays and hstore. Taking this thing to the limit. I did this for two reasons:</p>

<ul>
<li>Constraints changed, we could send multiple communications out on multiple networks at any given time</li>
<li>I wanted a log of history with whatever pieces of data may or may not be there</li>
<li>Be able to quickly get the networks sent out per user</li>
</ul>


<p>Now my AR model is decorated with <a href="http://api.rubyonrails.org/classes/ActiveRecord/Store.html">store_accessor</a> to give me model attributes for the networks. It also stores the log of messages in an array naturally through the model, and accessed as a real HSTORE with array values (instead of json, yay).</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class CommunicationLogging &lt; ActiveRecord::Base
</span><span class='line'>  store_accessor :networks, :facebook, :twitter, :email, :sms, :push
</span><span class='line'>
</span><span class='line'>  def set_network(network)
</span><span class='line'>      # for brevity only one listed
</span><span class='line'>      case network.downcase
</span><span class='line'>      when 'twitter'
</span><span class='line'>          self.twitter = true
</span><span class='line'>      end
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  def self.log(user_id, network, message, subject = nil)
</span><span class='line'>      comm = CommunicationLogging.where('user_id = ?', user_id).first
</span><span class='line'>      if comm.nil?
</span><span class='line'>          comm = CommunicationLogging.new
</span><span class='line'>          comm.user_id = user_id
</span><span class='line'>      end
</span><span class='line'>
</span><span class='line'>      comm.set_network(network)
</span><span class='line'>
</span><span class='line'>      history_log = { 'message' =&gt; message, 'subject' =&gt; subject, 'network' =&gt; network, 'time' =&gt; DateTime.now }
</span><span class='line'>      comm.history.push(history_log)
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>      comm.networks_will_change!
</span><span class='line'>      comm.history_will_change!
</span><span class='line'>      comm.save!
</span><span class='line'>  end
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<p>So what happens when I to_json my fields now in PostgreSQL?</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>// Networks
</span><span class='line'>"{"twitter": "true"}"
</span><span class='line'>
</span><span class='line'>// History
</span><span class='line'>"[{"time": "2014-04-27T10:15:50-05:00", "message": "asf", "network": "twitter", "subject": "asd"}]"</span></code></pre></td></tr></table></div></figure>


<p>And rails?</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># Networks
</span><span class='line'>"{"twitter":\"true"}" 
</span><span class='line'>
</span><span class='line'># History
</span><span class='line'>"[{"time":"2014-04-27T10:15:50-05:00","message":"asf","network":"twitter","subject":"asd"}]" </span></code></pre></td></tr></table></div></figure>


<p>Beautiful.</p>

<p>I had a lot of fun using PostgreSQL and Rails 4. I didn&rsquo;t find a lot of in-depth knowledge on it so I wanted to shed some light on the topic and hope this would push someone else who might be considering to try it out to give it a go.</p>

<p>I&rsquo;d like to follow up this post with another article on how to search these bad boys.</p>

<p>In closing:</p>

<ul>
<li>I will definitely use hstore more in the future. I like the freedom to just store whatever I want</li>
<li>I need to reach out to the Rails team and see what I can do about improving the array support in Active Record</li>
<li>I hope you try it out as well</li>
</ul>


<h3>Additional Resources</h3>

<ul>
<li><a href="http://postgresguide.com/sexy/hstore.html">Postgres Guide on HStore</a></li>
<li><a href="http://mikecoutermarsh.com/using-hstore-with-rails-4/">Mike Countermash&rsquo;s guide to Hstore with Rails 4</a></li>
<li><a href="http://platformonrails.wordpress.com/2013/03/17/enabling-postgresql-hstore-with-rails-4/">Platform on Rails &ndash; Enabling PostgreSQL Hstore in Rails 4</a></li>
<li><a href="http://blog.remarkablelabs.com/2012/12/a-love-affair-with-postgresql-rails-4-countdown-to-2013">RemarkableLabs &ndash; A love affair with PostgreSQL [Rails 4 Countdown to 2013]</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/04/18/enabling-android-remote-debugging-in-phonegap-2-dot-9/">Enabling Android Remote Debugging in Phonegap 2.9</a></h1>
    
    
      <p class="meta">
        <span class="reading-time">less than a 1 minute read</span>
        








  


<time datetime="2014-04-18T10:13:00-06:00" pubdate data-updated="true">Apr 18<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Recently the Cordova (as well as Phonegap) team has introduced <a href="http://www.raymondcamden.com/index.cfm/2014/1/2/Apache-Cordova-33-and-Remote-Debugging-for-Android">the ability to remote debug Android 4.4+</a> from <a href="https://issues.apache.org/jira/browse/CB-5487">this issue</a>.</p>

<p>If you&rsquo;re like us, you have a lot of invested technology into Phonegap 2.9, and are actively making the move to Cordova 3.4. In the real world, you aren&rsquo;t always granted conveniences to move to the latest and greatest all at one time when you have released products. <a href="http://www.raymondcamden.com/index.cfm/2014/4/11/Results-of-PhoneGap-Survey">Raymond Camden did a survey</a> and apparently there are still some out there utilizing Phonegap/Cordova 2.9.</p>

<p>I wanted to show how easy it was our team to backport some of the changes needed to enable Remote Debugging in Phonegap 2.9.</p>

<p>You&rsquo;ll need to make a few changes to your MainActivity.java file. The first is an import statement, and the second is to make these changes near the bottom of the onCreate method:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>// At the top near your other import statements:
</span><span class='line'>import android.webkit.WebView;
</span><span class='line'>// ..snip..!
</span><span class='line'>
</span><span class='line'>public void onCreate(Bundle savedInstanceState) {
</span><span class='line'>    // ..snip..
</span><span class='line'>    // Enable web debugging
</span><span class='line'>    if(android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.KITKAT) {
</span><span class='line'>      WebView.setWebContentsDebuggingEnabled(true);
</span><span class='line'>    }
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>One thing to note, this only works for Android versions 4.4 or greater! If you aren&rsquo;t using Android API 19 or greater, you&rsquo;ll have to keep using Weinre.</p>

<p>Now just start your app, enable USB debugging, open Chrome, go to about:inspect, and enjoy your remote debugging in Phonegap/Cordova 2.9! Cheers!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/04/14/apachecon-2014/">Apachecon 2014</a></h1>
    
    
      <p class="meta">
        <span class="reading-time">less than a 1 minute read</span>
        








  


<time datetime="2014-04-14T20:58:00-06:00" pubdate data-updated="true">Apr 14<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This year I was fortunate enough to attend ApacheCon 2014 in Denver CO. It was a big adventure for me, partyly due to one of my main goals this year was to contribute more to open source. I&rsquo;ve been actively contributing to the Apache Cordova project, so this was my opportunity to meet some of the Cordova contributors.</p>

<p>The conference kicked off first with Steve Gill&rsquo;s (<a href="https://twitter.com/stevesgill">@stevesgill</a>) talk on the Cordova CLI and the work flow with it. Steve is in charge of all the releases for Cordova, and we&rsquo;ve worked together on the <a href="http://plugins.cordova.io">cordova plugins registry</a> since the beginning of this year. Steve really pulls this team together, as he&rsquo;s a stand up guy and really easy to talk to. I, for one, am very thankful to have him be a part of the Cordova team!</p>

<p>The next talk was by <a href="https://twitter.com/doncoleman">@doncoleman</a> over Bluetooth LE and how to use it with the Cordova platform. This presentation really opened my eyes to what the Cordova project is capable of (not that I hadn&rsquo;t known, but he sure opened up some ideas), and much more so with Don&rsquo;s awesome <a href="https://github.com/don/cordova-plugin-rfduino">Cordova Plugin &ndash; RFDuino</a>, as well as his <a href="https://github.com/don/phonegap-nfc">NFC Plugin</a> that he presented later in the day. Not only can you write your Bluetooth/NFC items once, but they can run across platforms. Way awesome.</p>

<p>I was then lucky enough to see Andrew Grieve&rsquo;s <a href="https://twitter.com/GrieveAndrew">@GrieveAndrew</a> talk over the <a href="https://dl.dropboxusercontent.com/u/6648754/apachecon2014/index.html#1">Cordova Development Lifecycle</a> &ndash; it amazes me that the Cordova project is composed of around 50+ repos, and releases can take days! Wow. Theres&rsquo;s a lot that goes into the Cordova project.</p>

<p><a href="https://twitter.com/hazems">Hazem Saleh</a> then spoke about Javascript and Cordova &ndash; and how they fit together with the native bridges quite easily. He also quizzed the audience over some Javascript gotchas. Hazem also spoke to what it is like outside of the US &ndash; where there are other phones us American&rsquo;s don&rsquo;t really get to play with. Now that is global support, way to go Cordova!</p>

<p>Finally, <a href="https://twitter.com/LisaSeacat">Lisa DeLuca</a> gave a very informative presentation on how her and the other open source members around the world translate all of the Cordova documenation in a ton of different languages. It&rsquo;s interesting &ndash; first they take the English documents, upload to <a href="https://crowdin.net/">Crowdin</a> &ndash; which then handles either human translation (preferred) and even gives the option for automated translation (not perfect).</p>

<p>Finally, there was the hackathon held by Red Hat and IBM. It was awesome getting to sit with 8 of the core Cordova team members and hacking on my own project as well as getting very familiar with the code base. It was a truly exciting time for me.</p>

<p>Hopefully I&rsquo;ll get the opportunity to work with these fine folks more in the future! Cheers!</p>

<p><img class="left" src="https://pbs.twimg.com/media/Bky_CGxCAAAzDRb.jpg"></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/04/03/how-i-use-npm-link/">How I Use Npm Link</a></h1>
    
    
      <p class="meta">
        <span class="reading-time">less than a 1 minute read</span>
        








  


<time datetime="2014-04-03T10:04:00-06:00" pubdate data-updated="true">Apr 3<span>rd</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Throughout the last few months, I&rsquo;ve began helping out the <a href="http://cordova.apache.orc">Cordova</a> team with a few bug fixes that I come across and want to contribute back.</p>

<p>Cordova is a host of different <a href="https://issues.apache.org/jira/browse/CB/?selectedTab=com.atlassian.jira.jira-projects-plugin:components-panel">components</a>, many of which rely on node.js modules from npm.</p>

<p>When I first started wantint go help, I didnt know how to make changes to the cordova code to use globally, and I didnt want to just go modify the code in the global node_modules/cordova-cli folder. This post covers on how to get started modifying existing node modules you may use from npm.</p>

<h2>Why?</h2>

<p>Recently, I came across <a href="https://groups.google.com/forum/#!topic/phonegap/ahzIwbUqr4A">a small bug</a> in Cordova CLI 3.4. To begin to poke around the code to find a fix in the cordova-cli project.</p>

<p>When I first started, I had to figure out how to get access to the verion pulled from the repo on Github to use my code instead of the globally installed cordova.</p>

<h2>How I use npm-link</h2>

<ul>
<li>Uninstalled the currently used cordova cli, <code>npm uninstall -g cordova</code></li>
<li>Forked the <a href="https://github.com/apache/cordova-cli">cordova-cli repo from github</a></li>
<li><code>git clone git@github.com:jbavari/cordova-cli.git</code></li>
<li>Changed directory to the repo I just cloned</li>
<li>Ran <code>npm link</code></li>
</ul>


<p>After running npm link, I can now run <code>cordova create HelloWorld</code> from any directory, and it will use the code that I just <code>npm link</code>&rsquo;d.</p>

<p>Now, when I make changes to that repo that I cloned on my machine, I can run it immediately instead of having to push or update the package in npm.</p>

<p>Hope this helps others in trying to get started contributing to any projects that they might use from npm! (Or contributing to the Cordova project!)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/03/29/how-i-use-plugins-with-variables-in-phonegap-slash-cordova-applications/">Properly Using Plugins With Variables in Phonegap / Cordova Applications</a></h1>
    
    
      <p class="meta">
        <span class="reading-time">less than a 1 minute read</span>
        








  


<time datetime="2014-03-29T02:14:00-06:00" pubdate data-updated="true">Mar 29<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In the past week I&rsquo;ve been working on upgrading our mobile application from PhoneGap 2.9 to Cordova 3.4. (There is no real reason for going from PhoneGap to Cordova, just that I&rsquo;ve been actively committing to the Cordova project).</p>

<p>I&rsquo;ve come in contact with a weird bug with the Cordova CLI when using plugins that require variables to install them.</p>

<p>Currently <a href="http://devgirl.org/2013/11/12/three-hooks-your-cordovaphonegap-project-needs/">Holly Schinsky and Dan Moore</a> recommend using the <a href="https://github.com/apache/cordova-cli/blob/master/templates/hooks-README.md">Cordova Hook</a> <code>after_platform_add</code> to add in the plugins via a plugin list. While I too think this is a great idea, there is a small problem with it as of Phonegap/Cordova 3.4 when you use plugins with variables.</p>

<p>Before we go further, lets just get a quick intro to the platform hook calls that the <a href="https://github.com/apache/cordova-cli/blob/master/src/platform.js#l56">Cordova CLI</a> gives us. First it will fire off the scripts in the <code>/app/hooks/before_platform_add</code> (or <code>/app/.cordova/hooks/before_platform_add</code> if you&rsquo;re on PhoneGap/Cordova &lt;= 3.3) folder.</p>

<p>Next, Cordova CLI will go through some configs and eventually use a function named <code>call_into_create</code> that will do some housecleaning, but most importantly will <a href="https://github.com/apache/cordova-cli/blob/master/src/platform.js#l378">re-install currently installed plugins</a>.</p>

<p>Certain plugins will require variables for them to be installed. Take a look at the Phonegap Facebook Connect plugin, for example: <code>cordova plugin add https://github.com/phonegap/phonegap-facebook-plugin.git --variable APP_ID='appId' --variable APP_NAME='appName'</code>. Using Holly and Dan&rsquo;s solution, you an add that inline as well, like so:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var pluginlist = [
</span><span class='line'>    "https://github.com/phonegap/phonegap-facebook-plugin.git --variable APP_ID='" + appId + "' --variable APP_NAME='" + appName + "'",
</span><span class='line'>    "org.apache.cordova.camera",
</span><span class='line'>    "org.apache.cordova.console",
</span><span class='line'>    "org.apache.cordova.contacts"];
</span><span class='line'>
</span><span class='line'>var fs = require('fs');
</span><span class='line'>var path = require('path');
</span><span class='line'>var sys = require('sys')
</span><span class='line'>var exec = require('child_process').exec;
</span><span class='line'> 
</span><span class='line'>function puts(error, stdout, stderr) {
</span><span class='line'>    sys.puts(stdout)
</span><span class='line'>}
</span><span class='line'> 
</span><span class='line'>pluginlist.forEach(function(plug) {
</span><span class='line'>    exec("cordova plugin add " + plug, puts);
</span><span class='line'>});
</span></code></pre></td></tr></table></div></figure>


<p>The problem is, when Cordova CLI goes through to reinstall the plugins, it isn&rsquo;t passing in the variables and will fail to install them, but it will still add the folder to the plugins directory and json file. In fact, after adding the plugins, it will then call the hook (as seen above) and try to install plug-ins yet a second time. And by fail, I mean it will still fail with the facebook plugin &ndash; cordova CLI failed therefore it&rsquo;s half installed, so the hook will fail. (I hope this is clear)</p>

<p>To recap, here&rsquo;s the flow of how to reproduce the problem:</p>

<ul>
<li>Create new project with <code>cordova create</code></li>
<li>Add platform for ios</li>
<li>Add plugin with variables &ndash; <code>cordova plugin add https://github.com/phonegap/phonegap-facebook-plugin.git --variable APP_ID='appId' --variable APP_NAME='appName'</code></li>
<li>Add platform for android</li>
</ul>


<p>That&rsquo;s when you&rsquo;ll see:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Installing com.phonegap.plugins.facebookconnect (android)
</span><span class='line'>Error: Variable(s) missing: APP_ID, APP_NAME
</span><span class='line'>    at /usr/local/lib/node_modules/cordova/node_modules/plugman/src/install.js:252:29
</span><span class='line'>    at _fulfilled (/usr/local/lib/node_modules/cordova/node_modules/q/q.js:798:54)
</span><span class='line'>    at self.promiseDispatch.done (/usr/local/lib/node_modules/cordova/node_modules/q/q.js:827:30)
</span><span class='line'>    at Promise.promise.promiseDispatch (/usr/local/lib/node_modules/cordova/node_modules/q/q.js:760:13)
</span><span class='line'>    at /usr/local/lib/node_modules/cordova/node_modules/q/q.js:574:44
</span><span class='line'>    at flush (/usr/local/lib/node_modules/cordova/node_modules/q/q.js:108:17)
</span><span class='line'>    at process._tickCallback (node.js:415:13)</span></code></pre></td></tr></table></div></figure>


<p>You&rsquo;re probably wondering &ndash; why not add both of the platforms first, then add the plugin? That&rsquo;s what I recommend doing now.</p>

<p>However, going back to Holly and Dan&rsquo;s post, I highly recommend if you have any plugins with variables that you do a little clean-up of plugin&rsquo;s before adding them. And by clean-up, I mean, remove the plugins before adding them.</p>

<p>This should only be an issue until the awesome Cordova team fixes the issue of adding plugins correctly.</p>

<p>Hope this helps!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/03/19/rethinkdb-the-importing-json-process/">RethinkDB the Importing Json Process</a></h1>
    
    
      <p class="meta">
        <span class="reading-time">less than a 1 minute read</span>
        








  


<time datetime="2014-03-19T00:51:00-06:00" pubdate data-updated="true">Mar 19<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I was playing around tonight with RethinkDB &ndash; and I wanted to import some data from a JSON file. It wasn&rsquo;t very well documented, so I wanted to make sure I high-light that for others. <a href="http://www.rethinkdb.com/docs/tutorials/elections/">The tutorial post to see RethinkDB&rsquo;s import</a> covers this command to fire off:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rethinkdb import -c localhost:28015 --table registry.plugins --pkey _id -f plugins.json --format json</span></code></pre></td></tr></table></div></figure>


<p>It&rsquo;s real easy &ndash; lets break it down:</p>

<ul>
<li>The first part, <code>-c localhost:28015</code> specifies the cluster host and port.</li>
<li>The next, <code>--table registry.plugins</code> specifies the database &lsquo;registry&rsquo;, and the table &lsquo;plugins&rsquo;.</li>
<li>Next up is specifying the primary index key of &lsquo;_id&rsquo; with <code>--pkey _id</code>.</li>
<li>Finally, <code>-f plugins.json --format json</code> tells Rethink to pull in the file located in the CWD named plugins.json, in the jason formats!</li>
</ul>


<p>Chances are, you might not have that Python driver, which gives you this message:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Error when launching rethinkdb-import: No such file or directory
</span><span class='line'>The rethinkdb-import command depends on the RethinkDB Python driver, which must be installed.
</span><span class='line'>Instructions for installing the RethinkDB Python driver are available here:
</span><span class='line'>http://www.rethinkdb.com/docs/install-drivers/python/</span></code></pre></td></tr></table></div></figure>


<p>If thats the case, run the command to install the rethinkdb-import Python driver:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pip install rethinkdb</span></code></pre></td></tr></table></div></figure>


<p>Boom! Now get back to work.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/03/12/nodejs-rails-subdomains-pow/">Nodejs Rails Subdomains - POW!</a></h1>
    
    
      <p class="meta">
        <span class="reading-time">less than a 1 minute read</span>
        








  


<time datetime="2014-03-12T23:44:00-06:00" pubdate data-updated="true">Mar 12<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I wanted to do a quick write up of how I use <a href="http://pow.cx/">Pow</a> to run several rails/rack apps and provide subdomains for the rails / rack apps as well as node.js servers! I&rsquo;ll even throw in a Livereload plug in Rails/rack.</p>

<h2>The why</h2>

<p>We have several rails projects &ndash; an API server, a queue&#8217;ing rails project running <a href="https://github.com/mperham/sidekiq">Sidekiq</a>, an admin dashboard using Rails &amp; angular, and a node.js server running a PhoneGap mobile app run in express.</p>

<p>I needed an easy domain set up, something like:</p>

<ul>
<li>project.dev</li>
<li>my.project.dev</li>
<li>jobs.project.dev</li>
<li>m.project.dev</li>
</ul>


<p>I also needed Livereload due to the time it saves, who doesn&rsquo;t right? I do ok, quit asking questions. (But seriously please comment and ask)</p>

<h2>What I did</h2>

<p>After installing POW, I created a few symbolic links and a file containing the port that I would run the node.js server. As seen in the <a href="http://pow.cx/manual">the POW documentation</a> and listed in the same order as above.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>ln -s ~/Dev/RM/web ~/.pow/project
</span><span class='line'>
</span><span class='line'>ln -s ~/Dev/RM/my ~/.pow/my.project
</span><span class='line'>
</span><span class='line'>ln -s ~/Dev/RM/jobs ~/.pow/jobs.project
</span><span class='line'><span class="nb">echo </span>5000 &gt; ~/.pow/m.project
</span></code></pre></td></tr></table></div></figure>


<p>Awesome. So now Pow got the rails/racks apps up. Just need to start my node server by simply running <code>node app.js</code></p>

<h3>Ensure its there</h3>

<p>Now that I&rsquo;ve got the servers all running, i&rsquo;ll hit them up to check A-OK. Navigate to <code>http://my.project.dev</code>, <code>http://m.project.dev</code>, <code>http://project.dev</code>. Yep, all A-OK.</p>

<h3>Now to set up Livereload.</h3>

<p>Snag up a few gems to help Rails/rack do some livereloads automatically for me.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='rb'><span class='line'><span class="n">gem</span> <span class="s1">&#39;rack-livereload&#39;</span>
</span><span class='line'><span class="n">gem</span> <span class="s1">&#39;guard&#39;</span>
</span><span class='line'><span class="n">gem</span> <span class="s1">&#39;guard-livereload&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Two things to configure before livereload will work in the rails/rack apps &ndash; the first is a config setting in our development.rb file and our Guardfile with a host definition.</p>

<p>The first is development.rb:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="ss">MyProjectCom</span><span class="p">:</span><span class="ss">:Application</span><span class="o">.</span><span class="n">configure</span> <span class="k">do</span>
</span><span class='line'>  <span class="c1">#comments</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">middleware</span><span class="o">.</span><span class="n">use</span> <span class="ss">Rack</span><span class="p">:</span><span class="ss">:LiveReload</span>
</span><span class='line'>  <span class="c1">#the comments are a lie</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now the magic for the rails/rack apps is the Guardfile:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='rb'><span class='line'><span class="n">guard</span> <span class="s1">&#39;livereload&#39;</span><span class="p">,</span> <span class="ss">host</span><span class="p">:</span> <span class="s1">&#39;my.project.dev&#39;</span><span class="k">do</span>
</span><span class='line'>  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{app/views/.+\.(erb|haml|slim)$}</span><span class="p">)</span>
</span><span class='line'>  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{app/helpers/.+\.rb}</span><span class="p">)</span>
</span><span class='line'>  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{public/.+\.(css|js|html)}</span><span class="p">)</span>
</span><span class='line'>  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{config/locales/.+\.yml}</span><span class="p">)</span>
</span><span class='line'>  <span class="c1"># Rails Assets Pipeline</span>
</span><span class='line'>  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{(app|vendor)(/assets/\w+/(.+\.(css|js|html|png|jpg))).*}</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="s2">&quot;/assets/</span><span class="si">#{</span><span class="n">m</span><span class="o">[</span><span class="mi">3</span><span class="o">]</span><span class="si">}</span><span class="s2">&quot;</span> <span class="p">}</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Boom! Now I&rsquo;ve got Livereload being injected into each of the rails/rack apps I configured and handling all the other business. I just have to sit back and code.</p>

<p>Hope this helps any who may be wanting a similar set up with subdomains with rails/rack &amp; node.js hosted apps.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/03/11/how-to-be-a-good-imitator-in-phonegap-slash-cordova/">How to Be a Good Imitator in PhoneGap/Cordova</a></h1>
    
    
      <p class="meta">
        <span class="reading-time">less than a 1 minute read</span>
        








  


<time datetime="2014-03-11T01:02:00-06:00" pubdate data-updated="true">Mar 11<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>If you found your way here, then you&rsquo;re probably seeking knowlege about Phonegap/Cordova. I want to first remind you what the purpose of the PhoneGap / Cordova project is:</p>

<blockquote><p><a href="http://phonegap.com/2012/05/09/phonegap-beliefs-goals-and-philosophy/">The ultimate purpose of PhoneGap is to cease to exist.</a></p></blockquote>

<p>What this means is &ndash; you should really start getting ready to make Native-like apps regardless of what technology is used.</p>

<p>How can we give native apps a better feel from PhoneGap / Cordova? Or stated another way, what are some tricks we can use to make the application feel more native?</p>

<p>The answer then, is to be a better imitator, you must first understand what you are imitating.</p>

<h2>The chameleons change color to their surroundings</h2>

<p>Simply stated &ndash; you adapt to what your surroundings are.</p>

<p>Our surroundings for PhoneGap / Cordova are quite wide:</p>

<ul>
<li>iOS</li>
<li>Android</li>
<li>Windows Phone</li>
<li>BlackBerry</li>
<li>Firefox OS</li>
</ul>


<p>That is a lot to adapt to. It may take a little time to familiarize yourself with each platform. If you do though, your users will thank you.</p>

<h2>Some suggestions</h2>

<ul>
<li>Put navigation items near the top in Android, for iOS put them near the bottom. Users are used to having their navigation in the same place.</li>
<li>In Android / Windows Phone &ndash; mind the Back button! Users use their phones natively, and if you try to change this, they will hate your app.</li>
<li>Dont use the same button styles for each platform! Buttons on iOS do not look like buttons on Android &ndash; if you try this though, your users will notice and find it odd. <a href="http://goratchet.com/components/">See these great examples from Ratchet.js (look for the Base/iOS/Android buttons near the top)</a></li>
<li>Use Native-like loading animations. iOS generally has a small circle &ndash; if you try using this instead of your own custom loading icon, users will most likely blame their phone over your app. <a href="http://mercury.io/blog/the-psychology-of-waiting-loading-animations-and-facebook">See this study by Facebook for loading animations</a></li>
<li>Test on actual devices. You cant get a native feel from clicking on a simulator.</li>
</ul>


<p>References:</p>

<p><a href="http://www.tricedesigns.com/2013/03/11/performance-ux-considerations-for-successful-phonegap-apps/">Performance UX Considerations for successful PhoneGap apps</a></p>

<p><a href="http://www.mikedellanoce.com/2012/09/10-tips-for-getting-that-native-ios.html">Tips for getting that native feel</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/03/01/its-not-the-tools-its-you/">Its Not the Tools - Its You</a></h1>
    
    
      <p class="meta">
        <span class="reading-time">less than a 1 minute read</span>
        








  


<time datetime="2014-03-01T02:16:00-07:00" pubdate data-updated="true">Mar 1<span>st</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Reminder &ndash; you write the code, not the tools</h1>

<p>Duh, right?</p>

<p>There&rsquo;s a lot of debate I see about people saying you have to use a certain language or tool
to write good software or create apps. This is simply not the fact.</p>

<p>Case and point &ndash; if you write an app in iOS and it works great, the user simply does not care if it
was written in Objective-C, PhoneGap, or some other hybrid tool. (NOTE: unless the user is a troll)</p>

<p>I personally do a lot of work lately with Cordova/PhoneGap. I actively contribute to Cordova as well.
When I hear purists come down on the technology, I really wonder why.</p>

<p>Certainly, there can be some bad apps created with it. The same can be said for Objective-C!
Whatever the tool/language is, it can always be used in the wrong or inefficient way.</p>

<p>The truth is, there are some awesome technologies coming out from all kinds of directions.
What makes the tech better? The tools/languages/software used, or the overall look/feel/usage?</p>

<h2>Why am I writing this?</h2>

<p>Lately, I&rsquo;ve been trying to grow as a developer and really fine tune my craft.
I&rsquo;m writing this to remind myself &amp; hopefully remind others, any products/apps we make are only as good as we can make them.
<strong>NOT</strong> the tools we use to make them. (NOTE: sometimes a tool can improve performance, or some other aspect, but its still up to you to learn and adapt)</p>

<h2>If your app/product sucks, its your fault</h2>

<p>That&rsquo;s right &ndash; true responsibility.</p>

<p>Think about this &ndash; these days developers can make awesome, usable softare with only a text editor and some command line tools.</p>

<p>Now, given some additional IDEs, SDKs, Frameworks, ETC., the same developer could make more software, generally quicker.
Was it the tools that made the finalized product awesome?</p>

<p>That being said, if you are using a tool/system/framework, and it truly does suck &ndash; guess what?
You are free to change it!</p>

<h2>The weakness is you</h2>

<p>What makes someone great at anything is when they know what they are weak at and actively improve on those weaknesses.</p>

<p>One thing I wanted to focus fire this year was hitting my weak points.</p>

<p>It&rsquo;s always difficult to take a true honest look at yourself and evaluate what actions you should take. However, if you really want to improve and get ahead, there&rsquo;s no other way.</p>

<h3>Some of my weaknesses</h3>

<ul>
<li>Writing tests for my code &amp; taking a TDD approach</li>
<li>Actively testing my product (thoroughly)</li>
<li>Reading and keeping up to date with knowledge (blogs/books/etc)</li>
<li>Communicating and expressing my ideas</li>
</ul>


<h3>What I&rsquo;m trying</h3>

<ul>
<li>Expecting small improvements.</li>
<li>Iterate quickly.</li>
<li>Evaluate often.</li>
<li>Always be learning.</li>
</ul>


<h3>What I&rsquo;m doing</h3>

<ul>
<li>Starting to write tests for older code &amp; refactoring when needed, especially in Javascript &amp; Ruby</li>
<li>Getting together active test runners for iOS, Android, and the Web (CasperJS).</li>
<li>Evaluating weekly my tests I&rsquo;m writing &ndash; Using <a href="http://codeclimate.com">Code climate</a> to evaluate the quality/complexity of our code</li>
<li>Looking at other open source projects and how they write tests</li>
<li>Reading some BDD/TDD books to learn</li>
</ul>


<h2>The big picture</h2>

<p>Next time you are getting frustrated with your tools, programming language, etc &ndash; remember, it&rsquo;s up to you to improve it, or improve yourself. Cheers.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/01/24/grunt-orchestration-of-applescript/">Grunt.js Orchestration & Organization of Applescript Actions</a></h1>
    
    
      <p class="meta">
        <span class="reading-time">less than a 1 minute read</span>
        








  


<time datetime="2014-01-24T14:14:00-07:00" pubdate data-updated="true">Jan 24<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Lately I&rsquo;ve learned a little about AppleScript. If you&rsquo;re not familiar, I suggest reading the <a href="https://developer.apple.com/library/mac/documentation/applescript/conceptual/applescriptlangguide/introduction/ASLR_intro.html#//apple_ref/doc/uid/TP40000983-CH208-SW1">AppleScript Language Guide</a> to get a little more background information about it. In a nutshell, however, its basically a scripting language developed by Apple to do Inter-application communication using AppleEvents (yes, I used the language from the Wiki page).</p>

<p>In the last few months, I&rsquo;ve been absolutely obsessed with automating the boring tasks that wear me out. This is just another platform to add automation events. Imagine making a script that will open all your dev programs, set them up how you want them, launch a build process, focus a device simulator, and then begin clicking around that simulator. That is my vision for now.</p>

<p>In this post, I&rsquo;d like to address some ways I&rsquo;m leveraging AppleScript to automate some of my boring tasks. I won&rsquo;t focus much on the syntax, or how to navigate the language, but rather the methods I&rsquo;ve used to learn this knowledge. I&rsquo;ll be using <a href="http://gruntjs.com/">Grunt.js</a> to handle all my orchestration of applescript actions.</p>

<h2>Requirements</h2>

<p>You must be using an Apple device such as a Mac. That&rsquo;s about it</p>

<h2>A Handy Tip</h2>

<p>You might want to ensure you have Accessibility options turned on. You can learn about how to do that <a href="http://www.macosxautomation.com/applescript/uiscripting/">here</a></p>

<h2>Getting started</h2>

<p>It&rsquo;s really easy folks, just pop open your favorite text editor or use the native AppleScript Editor and start cranking it out.</p>

<p>Let&rsquo;s look an easy script that will do the following:</p>

<ul>
<li>Execute XCode run command</li>
<li>Open Safari</li>
<li>Run the Web Inspector for the Simulator running</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='applescript'><span class='line'><span class="k">on</span> <span class="nv">open_developer_window</span><span class="p">()</span>
</span><span class='line'>  <span class="k">try</span>
</span><span class='line'>      <span class="k">tell</span> <span class="nb">application</span> <span class="s2">&quot;Safari&quot;</span>
</span><span class='line'>          <span class="nb">activate</span>
</span><span class='line'>      <span class="k">end</span> <span class="k">tell</span>
</span><span class='line'>      <span class="k">tell</span> <span class="nb">application</span> <span class="s2">&quot;System Events&quot;</span>
</span><span class='line'>          <span class="k">tell</span> <span class="nv">process</span> <span class="s2">&quot;Safari&quot;</span>
</span><span class='line'>              <span class="k">tell</span> <span class="na">menu</span> <span class="nv">bar</span> <span class="mi">1</span>
</span><span class='line'>                  <span class="k">tell</span> <span class="na">menu</span> <span class="nv">bar</span> <span class="nb">item</span> <span class="mi">8</span>
</span><span class='line'>                      <span class="k">tell</span> <span class="na">menu</span> <span class="mi">1</span>
</span><span class='line'>                          <span class="k">tell</span> <span class="na">menu</span> <span class="nb">item</span> <span class="mi">4</span>
</span><span class='line'>                              <span class="k">tell</span> <span class="na">menu</span> <span class="mi">1</span>
</span><span class='line'>                                  <span class="nv">click</span> <span class="na">menu</span> <span class="nb">item</span> <span class="mi">2</span>
</span><span class='line'>                              <span class="k">end</span> <span class="k">tell</span>
</span><span class='line'>                          <span class="k">end</span> <span class="k">tell</span>
</span><span class='line'>                      <span class="k">end</span> <span class="k">tell</span>
</span><span class='line'>                  <span class="k">end</span> <span class="k">tell</span>
</span><span class='line'>              <span class="k">end</span> <span class="k">tell</span>
</span><span class='line'>          <span class="k">end</span> <span class="k">tell</span>
</span><span class='line'>      <span class="k">end</span> <span class="k">tell</span>
</span><span class='line'>      <span class="no">return</span> <span class="s2">&quot;Yo good job&quot;</span>
</span><span class='line'>  <span class="nb">on</span> <span class="k">error</span> <span class="nv">error_message</span>
</span><span class='line'>      <span class="no">return</span> <span class="nv">error_message</span>
</span><span class='line'>  <span class="k">end</span> <span class="k">try</span>
</span><span class='line'><span class="k">end</span> <span class="nv">open_developer_window</span>
</span></code></pre></td></tr></table></div></figure>


<h2>The problem</h2>

<p>After finding out how powerful AppleScript is, I began cranking out scripts for all my boring tasks. It became pretty nasty to manage having hundreds of lines into a single script.</p>

<p>The good news is, AppleScript has a way to import other scripts to use their methods, just by calling <code>load script &lt;name&gt;</code>.</p>

<p>The bad news is, it gets pretty sloppy trying to do the applescript &lsquo;load script&rsquo; command, as it became pretty nasty pretty quick.</p>

<p>Thats where Grunt came in. I figured instead of having a few include scripts &ndash; make the applescript files have just the functionality I wanted</p>

<h2>Using Grunt Shell</h2>

<p>I chose to use the <a href="https://github.com/sindresorhus/grunt-shell">Grunt shell</a> plugin to execute these scripts. You can easily do it over shell by executing <code>osascript &lt;name_of_script&gt;</code>.</p>

<p>What I did was create a nice layout for my applescript tasks as follows:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='applescript'><span class='line'><span class="nv">Applescripts</span>
</span><span class='line'><span class="err">|</span>
</span><span class='line'><span class="o">+</span><span class="c">---+--iPhone simulator tasks</span>
</span><span class='line'>  <span class="err">|</span>  <span class="err">|</span>
</span><span class='line'>  <span class="err">|</span>  <span class="o">+</span><span class="c">-- reset_simulator.applescript</span>
</span><span class='line'>  <span class="err">|</span>
</span><span class='line'>  <span class="o">+</span><span class="c">--safari tasks</span>
</span><span class='line'>  <span class="err">|</span>  <span class="err">|</span>
</span><span class='line'>  <span class="err">|</span>  <span class="o">+</span><span class="c">-- start_safari_dev_console.applescript</span>
</span><span class='line'>  <span class="err">|</span>  <span class="o">+</span><span class="c">-- dev_console_test_runner.applescript</span>
</span><span class='line'>  <span class="err">|</span>
</span><span class='line'>  <span class="o">+</span><span class="c">--XCode tasks</span>
</span><span class='line'>     <span class="err">|</span>
</span><span class='line'>     <span class="o">+</span><span class="c">-- open_ios_project_file.applescript</span>
</span><span class='line'>     <span class="o">+</span><span class="c">-- run_simulator.applescript</span>
</span><span class='line'>     <span class="o">+</span><span class="c">-- select_simulator_6.applescript</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then, I created Grunt tasks for each applescript task as I wanted, as such:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">shell</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">start_safari_dev_console</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">command</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;osascript ./applescripts/safari_tasks/start_safari_dev_console.applescript&#39;</span><span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&amp;&amp;&quot;</span><span class="p">)</span>
</span><span class='line'>      <span class="p">},</span>
</span><span class='line'>      <span class="nx">dev_console_test_runner</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">command</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;osascript ./applescripts/safari_tasks/dev_console_test_runner.applescript&#39;</span><span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&amp;&amp;&quot;</span><span class="p">)</span>
</span><span class='line'>      <span class="p">},</span>
</span><span class='line'>      <span class="nx">open_ios_project_file</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">command</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;osascript ./applescripts/xcode_tasks/open_ios_project_file.applescript&#39;</span><span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&amp;&amp;&quot;</span><span class="p">)</span>
</span><span class='line'>      <span class="p">},</span>
</span><span class='line'>      <span class="nx">run_simulator</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">command</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;osascript ./applescripts/xcode_tasks/run_simulator.applescript&#39;</span><span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&amp;&amp;&quot;</span><span class="p">)</span>
</span><span class='line'>      <span class="p">},</span>
</span><span class='line'>      <span class="nx">simulator_6</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">command</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;osascript ./applescripts/xcode_tasks/simulator_6.applescript&#39;</span><span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&amp;&amp;&quot;</span><span class="p">)</span>
</span><span class='line'>      <span class="p">},</span>
</span><span class='line'>      <span class="nx">reset_simulator</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">command</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;osascript ./applescripts/simulator_tasks/reset_simulator.applescript&#39;</span><span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&amp;&amp;&quot;</span><span class="p">)</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>Followed by a few set of tasks:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">grunt</span><span class="p">.</span><span class="nx">registerTask</span><span class="p">(</span><span class="s1">&#39;run_sim&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;shell:run_simulator&#39;</span><span class="p">,</span> <span class="s1">&#39;shell:start_safari_dev_console&#39;</span><span class="p">]);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">grunt</span><span class="p">.</span><span class="nx">registerTask</span><span class="p">(</span><span class="s1">&#39;start_project&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;shell:open_ios_project_file&#39;</span><span class="p">,</span> <span class="s1">&#39;shell:simulator_6&#39;</span><span class="p">,</span> <span class="s1">&#39;run_sim&#39;</span><span class="p">]);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">grunt</span><span class="p">.</span><span class="nx">registerTask</span><span class="p">(</span><span class="s1">&#39;restart_sim&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;shell:reset_simulator&#39;</span><span class="p">,</span> <span class="s1">&#39;run_sim&#39;</span><span class="p">]);</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Useful tools</h2>

<p>After learning the basic structure of AppleScript, it&rsquo;s easy to see how the structures are laid out. The hard part, is figuring out how they are actually laid out. There&rsquo;s an awesome built in tool, called &ldquo;Accessibility Inspector&rdquo;. This tool will tell you the control you are focusing on an application.</p>

<p>The second tool that is EXTREMELY helpful is a tool called <a href="http://pfiddlesoft.com/uibrowser/">UI Browser</a>. This is a tool that you can select an application, hover over that application, and UI Browser will tell you that controls. It even has a drop down of common actions, like clicking, filling in text, and other common uses.</p>

<h2>Overall results</h2>

<p>Altogether, I&rsquo;m pretty happy with how my little Applescript trials went. It&rsquo;s very easy now to chain together applescript tasks using Grunt.</p>

<p>On a side note.. Apparently applescript is already used in some grunt plugins, as I&rsquo;ve found tucked away in some projects code.</p>

<p>Happy coding.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/7/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/5/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2019/09/12/on-the-clock/">On the Clock</a>
      </li>
    
      <li class="post">
        <a href="/blog/2019/02/23/the-victim-or-the-victor/">The Victim or the Victor</a>
      </li>
    
      <li class="post">
        <a href="/blog/2019/01/29/3-years-of-elixir-reflections/">3 Years of Elixir: Reflections</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/04/16/puppet-a-testing-handbook/">Puppet: A Testing Handbook</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/03/13/test-coverage-reports-in-elixir/">Test Coverage Reports in Elixir</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/jbavari">@jbavari</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'jbavari',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2019 - Josh Bavari -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
  <script src="//static.getclicky.com/js" type="text/javascript"></script>
  <script type="text/javascript">try{ clicky.init(100896582); }catch(e){}</script>
  <noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/100896582ns.gif" /></p></noscript>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'joshbavari';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
